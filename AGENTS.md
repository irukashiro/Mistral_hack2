# よりよい AI駆動開発「共通ルール設定チェックリスト」



# AGENTS.md (ver.20260126)

思考は英語で行い、最終的な出力は必ず日本語で提供してください。

---

## メタ指示

- このファイルはAIエージェントが自律的に更新する
- プロジェクトに無関係と判明した行は削除し、コミットに理由を記録する
- 開発中に得た知見（バグ原因、設計判断の理由）を「プロジェクト固有知見」に追記する
- 新セッション開始時は `.claude/status.md` を最初に読む

## 知見の記録ルール

| 情報の種類 | 記録先 | 更新方法 |
|-----------|--------|---------|
| 恒久的教訓（ハマりポイント、設計判断の理由） | AGENTS.md | 追記 |
| セッション跨ぎの作業状態 | `.claude/status.md` | 上書き更新 |
| タスク管理 | GitHub Issues / TODO | 完了時クローズ |

### 作業ログ記載場所

| ログ種別 | 記載先 | 目的 |
|:--------|:------|:-----|
| **開発ログ（技術詳細）** | `docs/YYYY-MM-DD.md` | リポ内履歴、PR/Issue参照用 |


**運用ルール**:

### CEOへの依頼ルール

**禁止事項**:
- 会話中に突然「CEOに確認してください」と言わない
- 判断を丸投げしない
- 期限・工数なしの依頼をしない

**依頼時の必須項目**:
1. `kaitas/my-todo` Issue を作成
2. タイトル: `[リポ名] 依頼内容`
3. 見積もり工数（例: 10分、1時間、半日）
4. 期限（例: 今週中、1/28まで、急ぎではない）
5. 関連japan-corp Issue番号

| 依頼種別 | 例 |
|:--------|:---|
| 判断依頼 | Go/No-Go、方針決定、優先順位変更 |
| 操作依頼 | CEO権限での設定、署名、支払い |
| 確認依頼 | レビュー、承認、フィードバック |

### ポート管理

**開発サーバーのポート割り当て**:

```bash
# 使用前に空きを確認
lsof -i :3000-3010 | grep LISTEN
```

| ポート範囲 | 用途 | ルール |
|:----------|:-----|:-------|
| 3000-3010 | 短期実験・開発 | `lsof`で空いていれば使用可 |
| 3011-3099 | 長期プロジェクト | 申請制（下表で管理） |

**長期プロジェクト割り当て（申請済み）**:

| ポート | リポジトリ | 用途 |
|:------|:----------|:-----|


### 共通アセット管理

**Liquid Glass CSS（共通UIスタイル）**


```

```

**利用方法（他プロジェクトから）**:
```html


**対象プロジェクト**:


**更新ルール**:


### 並列開発セッション管理

**最大3セッション制限**:
CEOの認知負荷管理のため、同時アクティブな開発セッションは最大3つ。

**セッション開始時（必須）**:

```

**現在のセッション確認**:



**セッション完了時**:

```

**カレンダー表示例**:
```

```

---

## 開発規律

### エラーハンドリング
- エラーの抑制（`@ts-ignore`、try-catchで握りつぶす等）ではなく、根本原因を修正
- 早期にエラーを検出し、明確なエラーメッセージを提供
- エラーケースも必ずテストでカバーする
- 外部APIやネットワーク通信は必ず失敗する可能性を考慮

### コード品質
- DRY原則：重複を避け、単一の信頼できる情報源を維持
- コメントは「なぜ」を説明し、「何を」はコードで表現
- プロジェクト全体で一貫したコーディングスタイルを維持

### テスト
- 実装詳細ではなく振る舞いをテスト
- テスト間の依存を避け、任意の順序で実行可能に
- テストは高速で、常に同じ結果を返すように

### 保守性
- 大規模な変更は小さなステップに分割
- 使用されていないコードは積極的に削除
- 技術的負債は明示的にコメントやドキュメントに記録

### セキュリティ
- APIキー、パスワード等は環境変数で管理（ハードコード禁止）
- すべての外部入力を検証

### パフォーマンス
- 推測ではなく計測に基づいて最適化

### Git運用
- コンベンショナルコミット形式を使用（feat:, fix:, docs:, test:, refactor:, chore:）
- コミットは原子的で、単一の変更に焦点を当てる

### デバッグ
- 問題を確実に再現できる手順を確立
- 最近の変更から調査を開始

### 依存関係
- 本当に必要な依存関係のみを追加
- 新しい依存関係追加前にライセンス、サイズ、メンテナンス状況を確認

### ドキュメント
- ドキュメントをコードと同期して更新

---

## プロジェクト固有知見

（AIエージェントが開発中に追記するセクション）

---

## 共通ルール設定チェックリスト

新プロジェクトにこのテンプレートを適用する際の確認事項：

1. **外部通信の有無** → なければ「外部APIは失敗する可能性を考慮」を削除
2. **秘密情報の有無** → なければ「環境変数で管理」を削除
3. **テストフレームワーク** → 使用するツール名を明記（pytest, jest, vitest等）
4. **依存関係の方針** → ゼロ依存なら「依存関係」セクション全体を削除
5. **Git運用** → コミットメッセージの言語（日本語 or 英語）を明記
6. **対象言語** → 言語固有の規約があれば追記（例：Python→ruff, TypeScript→strict mode）


---

## 変更履歴

| バージョン | 日付 | 変更内容 |
|:----------|:-----|:---------|



