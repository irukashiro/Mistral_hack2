# 勝利条件仕様書（概要）

このドキュメントは、陣営勝利条件と個人勝利条件（True Win）を整理した仕様書です。ゲーム終了時の判定ロジック・表示要件の基準になります。

## 1. 陣営勝利条件（Main Mission）
- 平民（heimin）: 会議の投票で「貧民」と「富豪」の両方を排除（追放）する。
- 富豪（fugo）: 大富豪パートで、誰よりも早く手札を0枚にする（上がる）。
- 貧民（hinmin）: いずれか1つを満たすと勝利。
  - 条件A: 大富豪パートで最も早く上がる。
  - 条件B: 大富豪パートで革命を成立させる（同値の4枚出し等）。
  - 条件C: 昼の会議で現在の「富豪」に票を集めて追放する。

※ 陣営勝利は通常のゲーム終了条件の一つであり、個人勝利（True Win）より優先度は低い。

## 2. 個人勝利条件（Secret Mission / True Win）
- 個人勝利は陣営目標より優先され、達成時はそのプレイヤーへ「単独勝利（True Win）」を付与する。

代表的な個人勝利例:
- 復讐者（Revenge）: ターゲット（特定1名）が会議で処刑される。
- 庇護者（Protect）: ターゲットが陣営勝利または個人勝利を達成すること。
- 殉教者（Martyr）: 自分自身が会議で追放される（最多票で追放される）こと。

動作指針:
- NPCは個人勝利を強く意識した行動を取る（会議で攻撃的/防御的に振る舞う、夜にイカサマで援護/妨害）。
- 個人勝利達成時は即座にTrue Win判定を行い、リザルトで特別演出を行う。

## 3. 終了判定フロー（概要）
1. イベント発生（処刑 / 夜の上がり / 革命 など）。
2. check_instant_victories() を実行：個人勝利の達成を最優先で判定。
3. 個人勝利があれば、そのプレイヤーに True Win を与え、エンド状態へ遷移（陣営勝敗は併記）。
4. 個人勝利がなければ、通常の陣営勝利条件を評価し勝者を確定する。

## 4. 表示要件（リザルト）
- True Win の場合: リザルトで「あなたは単独勝利（True Win）を達成しました」と強調表示。
- Normal Win の場合: 陣営勝利とその達成条件を表示。
- Lose の場合: どの条件が未達かを簡潔に表示（例: 「個人目標未達」「陣営敗北」）。

---
作成日: 2026-03-01
