ゲーム設計書：『Class Conflict : Millionaire』v2.0
1. 世界観とストーリー設定（デスゲーム）
導入シナリオ:
見知らぬ閉鎖空間に誘拐され、集められた5人の男女。彼らに課せられたのは、生き残りを賭けた「大富豪」だった。
参加者の構成と階級:
参加者には非公開の階級が割り振られている。
【富豪階級】：裕福な家の者。初期手札が強く、いち早く上がってこのゲームから脱出（勝利）することを目指す。
【貧民階級】：貧しい家の者。まともな手札では勝てないため、「ズル（イカサマ）」を用いてでも勝利をもぎ取ろうとする。彼らの真の目的は、大富豪のルールである**「革命（カード4枚出し等での強弱逆転）」を起こし、理不尽な階級社会をぶっ壊すこと**である。
【平民階級】：事件に巻き込まれた一般人。状況に翻弄されながらも生き残る道を探る。
「運命の糸（顔見知り）」ルール:
5人は全くの他人のように見えて、**「全員が必ず、参加者のうち最低1人と顔見知り（あるいは何らかの因縁がある）」**という裏設定がAIによってゲーム開始時に自動生成される。（例：AとBは元同級生、CはDの借金取り、など）
2. プレイヤーアシスト＆UXシステム（遊びやすさの向上）
デスゲームの複雑な推理をプレイヤーが快適に楽しめるよう、以下のUI/UX機能を実装します。
① サポートAIによる「質問ヒント＆定型文」機能
何を話せばいいか迷ったプレイヤーのため、画面端に「おすすめのアクション」が3つほど常時提案されます。
ヒント例:
「一日目だし、皆についてまずは自己紹介をしない？」
「AはBを支持しているね。どうして？」
「さっきから馴れ馴れしいよ。お互いに貧民かもしれないんだからそういうのはやめておこう」
「CとDってどういう関係なの？」
定型文ボタン: 「ワンクリックで発言できる選択肢」も用意し、テキスト入力の手間を省きつつ議論を回せるようにします。（例：[昨日のイカサマについて問いただす] [Cを富豪だと告発する]）
② 「真実のオートメモ」システム
会議や大富豪パートでの会話中、AIがポロリとこぼした「プロフィール上の事実」や「人間関係」をシステムが自動検知し、プレイヤーの画面内の**「捜査メモ帳」に自動追記**します。
画面表示例：「💡【更新】BはAを『先輩』と呼んだ。過去に同じコミュニティにいた可能性が高い」
③ デバッグ・評価用「神の目モード」トグルボタン
開発者およびコアゲーマー向けに、画面右上に**【デバッグモード切替ボタン】**を配置します。
ONにした時の表示:
各キャラクターの頭上に、「現在の隠し階級」「AIの裏設定（目的・顔見知りの相手）」「現在のヘイト値」「次に狙っている行動（プロンプト思考ログ）」がすべてスケルトン状態で表示されます。ゲームバランスの調整や、AIの挙動テストに極めて有効です。
3. ゲームサイクル
【昼】会議（アドベンチャーパート）
名目上の目的: 手段を選ばない「貧民」はデスゲームの輪を乱す危険分子であるため、**「誰がズルをする貧民なのかを告発し、排除する」**ことがこの会議の建前となります。
追放（吊り）の処理変更:
投票で最多票を集め、吊るし上げられたキャラクターは**「ゲームから除外（死亡/脱落）」**されます。
プレイヤーが吊られた場合：ゲームオーバーにはならず、**「観戦（ゴースト）モード」**へ移行します。残されたAIたちがデスゲームをどう結末に導くか、すべての裏設定（デバッグモード相当）が開示された状態で最後までドラマを見届けることができます。
【夜】死闘の大富豪（カードプレイパート）
大富豪中のリアルタイム会話＆リアクション：
カードを出す、またはパスをするたびに、キャラクターが喋ります（プレイヤーもテキスト入力や定型文で発言可能）。
リアクション例：
（AIが「2」を出した時）「ふふっ、悪いね。これで一旦場を流させてもらうよ」
（誰かが強いカードを出した時）「おいおい、そんな手札持ってるなんて、お前が富豪だろ！」
（イカサマが発動した時）「…チッ、今、手元が不自然に動かなかったか？」
これにより、単調になりがちなカードプレイ中も、常に疑心暗鬼とキャラクターの感情が入り乱れます。
4. リザルト画面（真相解明フェーズ）
ゲーム終了後（誰かが上がる、革命が起きる、生存者が2人になる等）、エンディングと共に**「すべての真実」が公開されるリザルト画面**が表示されます。
公開される情報:
全員の真の階級
AIが自動生成した「裏のプロフィール・生い立ち」
全員の隠された関係性（顔見知り相関図）
個別の「真の勝利条件（True Win）」とその達成状況
プレイヤーの体験:
「あの時、AがBをかばったのは、実は幼馴染だったからか！」「Cが過激な発言をしていたのは、革命ではなく自分が吊られることが目的の狂人だったからか！」という、**「アハ体験（伏線回収）」**を提供します。



ゲーム設計書：『Class Conflict : Millionaire』v3.0（軽量・連動特化版）
1. 人数構成と陣営の変更（5人プレイ想定）
ゲームの構図を**「平民陣営（多数派）」vs「富豪（1人）」vs「貧民（1人）」**という非対称の三つ巴に変更します。
構成割合：【平民：3名】【富豪：1名】【貧民：1名】
各階級の基本スタンス：
平民（多数派）：「大富豪で一人勝ちして逃げ切ろうとする富豪」と、「ルールを壊すイカサマ貧民」を両方とも排除することが目的。
富豪（少数派）：平民のフリをして潜伏する。貧民がイカサマをした痕跡を突いて、平民のヘイト（怒り）を貧民に向けさせる。
貧民（少数派）：平民のフリをして潜伏する。「富豪があんな強いカードを出しているぞ、あいつが危険だ！」と平民を扇動し、富豪を吊るし上げようとする。
※ストーリー・プロフィールは「職業」「性格」「顔見知りの相手（1名）」程度に軽量化し、AIの処理負荷とプレイヤーの認知負荷を下げます。
2. 勝利条件（個別上がり目標）の緩和
富豪・貧民は会議で吊られるリスクが跳ね上がったため、大富豪パートでの勝利条件（個別目標）を達成しやすく調整します。
富豪の上がり目標（例）
緩和前：1番乗りで上がる。
緩和後：「自分を含む、誰か（特定の平民など）が手札を0枚にする前に、自分の手札を2枚以下にする」（※完全勝利しなくても、逃げ切る寸前までいけばミッションクリアとする）
貧民の上がり目標（例）
緩和前：革命を起こす、または1位で上がる。
緩和後：「富豪より先に上がる」「大富豪中に、特定の強いカード（2やジョーカー）を場に出す（＝ズルで奪って使う）」
3. 昼：会議（アドベンチャーパート）のシステム
AI思考の軽量化と「ヘイトシステム」
AIの発言や思考を、「誰が富豪か/貧民か」の推理と「多数派工作」に特化させます。
AIの判断基準（プロンプトへの指示）:
AIは以下の「事実」のみをベースに思考し、最も危険な人物にヘイトを向けます。
大富豪での強さ：「Aは『2』を2枚も出していたから富豪に違いない。吊るべきだ」
イカサマの痕跡：「Bのターンで妙な動きがあった。貧民の可能性があるから吊ろう」
会議での同調：「私は平民だ。Cも私に賛同してくれているから、Cは味方の平民だろう」
プレイヤーの立ち回り:
プレイヤーが富豪や貧民の場合、平民（NPC）のAIにいかに同調し、「自分は無害な平民である」と信じ込ませるか（引き込み）が鍵になります。
4. 夜：大富豪パートと「ズル（イカサマ）」の仕様変更
貧民の「ズル」について、**「能動側（ズル側）が圧倒的に有利」になるよう、システムを【陽動（デコイ）システム】**へ刷新します。
新・ズルのフロー：『陽動と死角』
防御側が「全部警戒する」といった万能プロンプトを書けないよう、心理戦の要素を強めます。
ズル側（貧民）の入力：【陽動】と【本命】を分ける
ズル側は、「相手の注意を引く行動（陽動）」と、「実際にカードを奪う行動（本命）」の2つをプロンプトで入力します。
プロンプト例：「【陽動】天井の照明を突然指さし、『うわっ、虫！』と大声を出す。【本命】相手が上を向いた隙に、手元から一番右のカードを奪う。」
対策側（ターゲット）の入力：【極短時間でのリアクション】
対策側の画面には、ズル側の【陽動】のテキストだけが突然表示されます。
そして、**「5秒以内（または15文字以内）」**で、その状況に対するリアクション（対策）を入力しなければなりません。
表示例：「（ズル側）が天井を指さし『うわっ、虫！』と叫びました！ どうする！？ [残り5秒]」
対策の入力例：「上を見る」「無視して手元を見る」「相手の目を見る」など
AIジャッジの絶対基準（ズル側有利のロジック）
AIは以下の基準で判定します。
対策側が【陽動】に引っかかった（例：「上を見る」と書いた、または時間切れになった）場合 ＝ ズル側の大成功（カード強奪成功、バレない）。
対策側が【本命】をピンポイントでガードした（例：「無視して手元を見る」と書いた）場合 ＝ ズルの失敗（しかし、混乱に乗じているためバレない）。
対策側が物理的な接触等で相手を完全に制圧した場合 ＝ ズル失敗＆露見（翌日の会議で吊られる）。
なぜこれが「能動側有利」なのか？
対策側は、突然表示される「陽動」に対して、焦って文字を入力しなければならないため、人間の心理としてついつい陽動に乗ったリアクションを書いてしまいます。
ズル側は時間をかけて「どうすれば相手が思わず別の場所を見てしまうか」というトラップ（プロンプト）を練ることができます。
万が一失敗しても「バレる（露見する）」リスクが極めて低く設定されているため、貧民は毎ターン息をするようにズルを仕掛けることができます。
まとめ
このv3.0の仕様により、ゲームの流れは以下のようになります。
夜（大富豪）：
貧民が有利なズルを駆使して場をかき乱し、強いカードを奪う。富豪は奪われないよう警戒しつつ、少ない手札で上がろうとする。平民はただ翻弄されながらカードの出方（事実）を記憶する。
昼（会議）：
「あいつが強すぎる！（富豪だ）」「いや、あいつは俺からカードを盗んだ！（貧民だ）」とマイノリティ同士が互いに罪をなすりつけ合い、マジョリティである3人の平民に「あいつが危険だ」とプレゼンして処刑の票を集める。
世界観の軽量化によってAIの処理スピードも上がり、プレイヤーは「プロンプトによるイカサマの騙し合い」と「会議での多数派工作（政治）」という、2つの極上の心理戦に集中できるようになります。



ゲーム設計書：『Class Conflict : Millionaire』v4.0（役職・感情パラメータ実装版）
1. 階級（Class）と役職（Role）の2層構造
プレイヤーとNPCには、ベースとなる「階級（陣営）」に加えて、人狼ゲーム的な「役職（特殊能力）」が付与されます。（※5人プレイ想定）
階級構成（基本陣営）
富豪（1名）：少数派。大富豪で勝ち逃げすることが目的。
貧民（1名）：少数派。イカサマ（ズル）を駆使し、革命や富豪の失脚を狙う。
平民（3名）：多数派。富豪と貧民を会議で排除することが目的。
追加される「役職」（主に平民に付与される）
大富豪パート（夜）または会議パート（昼）で特殊なアクションが可能です。
【探偵】（占い師）：大富豪パートの開始時に1人を選び、「その人物の階級」または「手札の最強カード1枚」をシステムからこっそり教えてもらえる。昼の会議でその情報を報告できる。
【ボディガード】（騎士）：昼の会議の投票時に1人を選び、その人物への「吊り（追放）」を1度だけ無効化できる。
【共犯者】（狂人）：平民階級だが、富豪または貧民が勝利すると自分も勝利となる裏切り者。嘘の報告で場を混乱させる。
2. NPCの内部パラメータ（関係値マトリックス）
NPCは、他プレイヤー全員に対して**「Trust（信頼度）」と「Affinity（好感度）」**の2つの関係値マトリックス、2次元パラメータ（0〜100）を保持します。
Trust（論理的な信頼度）：「こいつは味方（平民）だ」という論理的評価。
上がる条件：探偵から「平民だ」と報告される、大富豪で目立った動き（強いカード・イカサマ）をしない。
下がる条件：探偵から「富豪/貧民だ」と告発される、発言に矛盾がある、大富豪で理不尽に強いカードを連発する。
Affinity（感情的な好感度）：「こいつが好きか、嫌いか」という感情的評価。
上がる条件：会議でかばってもらう、意見に同調してもらう、大富豪でパスを回して（アシストして）もらう。
下がる条件：会議で疑われる、大富豪で自分の直前に「8切り」や強いカードを出されてターンを潰される。
3. NPCの思考ルーチン（Personality）
NPCはゲーム開始時に4つの「性格」のいずれかが割り当てられ、TrustとAffinityのどちらを優先して発言・投票を行うかが決まります。
【論理型】：Trust を最優先。
探偵の報告や大富豪のカードの出方（証拠）を絶対視する。矛盾があれば親友（Affinity高）でも容赦無く吊る。
【感情型】：Affinity を最優先。
自分が好きな相手（Affinity高）なら、探偵に「あいつが貧民だ」と告発されても「いや、探偵が嘘をついている！」とかばう。嫌いな相手には粘着する。
【ヘイト回避型】：自身の生存を最優先。
TrustやAffinityに関わらず、「現在最も票が集まりそうな人物（多数派の意見）」に同調する。自らは絶対に行動を起こさない。
【破滅型】：場を支配する絶対者。
初期手札が強い、または富豪階級になりやすい。論理も感情も無視し、「自分に逆らった者（自分へのAffinityが低い行動をとった者）」を優先的に攻撃・排除する。
4. 個別目標（True Win）の動的生成システム
単なる「陣営の勝利」とは別に、各キャラクターにはAIが自動生成する**「個人目標（True Win）」が設定されます。
これは【隠されたプロフィール × 階級 × 役職】**の組み合わせからプロンプトによってランダムに生成されます。
【個人目標の生成例】
例1（探偵 × 平民 × 過去に因縁がある）
目標：「Aの本当の階級を暴き、かつAを会議で吊るし上げる」
例2（ボディガード × 平民 × 感情型）
目標：「B（好感度MAXの相手）を最後まで生存させる。たとえBが貧民（敵陣営）であっても守り抜く」
例3（役職なし × 貧民 × 知識欲求）
目標：「大富豪で勝つことよりも、Cの『隠されたプロフィール（なぜデスゲームに参加したか）』を会議の会話の中で引き出し、メモ帳に記録する」
5. 昼夜のゲーム進行イメージ（統合版）
【夜】大富豪パート（イカサマと能力行使）
能力フェーズ：
探偵は「誰を占うか」を選択。貧民は「誰にどんなズルを仕掛けるか（陽動と本命）」を入力。
カードプレイ：
通常の大富豪。NPCは「Affinityが高い相手」にはあえてパスをして手番を回し、「Affinityが低い相手」には強いカードをぶつけて妨害するといった人間くさいプレイングを行います。
【昼】会議パート（探偵の報告と愛憎の投票）
探偵の報告（カミングアウト）：
探偵が「私は探偵だ。昨日の夜、Aを占ったら『富豪』だった！」と宣言。
論理と感情の衝突（議論）：
論理型NPC：「探偵の報告を信じよう。A、お前の昨日のカードの出し方も富豪らしかった。Aを吊る。」（AへのTrust低下）
感情型NPC：「待って！ 私はAが好きだ。昨日の大富豪でも私を助けてくれた！ 探偵が嘘つきの共犯者かもしれないじゃないか！」（AへのAffinity依存で擁護）
貧民（プレイヤー）：「そうだそうだ！ 探偵は怪しい！（※本当は自分が貧民なので、平民同士が争うように便乗する）」
投票と追放：
議論の結果を基に投票。ボディガードがこっそりAを守っていた場合、「Aの処刑は失敗した！」というドラマチックな展開が発生します。



AI論理構築システム（Logic State Manager）設計書
1. システムの基本構造
会議パートにおける各AIの発言は、以下の3ステップで生成されます。
事実の抽出（Fact Logging）：誰が何の役職をCO（カミングアウト）したか、大富豪で誰が強いカードを出したかをシステムが記録。
論理状態の計算（Logic Calculation）：システムが現在の盤面から「確定白（味方）」「対抗状態」「ライン（共犯関係）」を計算。
戦術フラグの付与（Tactic Flagging）：計算結果に基づき、AIの裏側パラメータに「現在有効な人狼セオリー」をフラグとして渡し、発言プロンプトを生成する。
2. 実装する主要な「人狼ロジック」と発動条件
AIに認識させる具体的なロジック（戦術）と、それをAIが提案し始める条件を定義します。
① ローラー（ロラ）作戦
定義：同じ役職（例：探偵）に2人以上が名乗り出た場合、どちらかが本物でどちらかが偽物（敵陣営や共犯者）であるため、数日かけて「両方とも吊るし上げる（処刑する）」ことで、確実に偽物を処理する手堅い戦術。
システムの発動条件：
状態：探偵CO = 2人以上
AIへの指示（フラグ）："Tactic_Available": "Roller_Detective"
AIの発言例（論理型）：「AもBも探偵だと主張している。どちらかが偽物（貧民か共犯者）だ。今日はAを吊り、明日Bを吊る『ローラー』を行おう。そうすれば確実に敵を1人減らせる。」
② 確定白（進行役）の認識
定義：誰も対抗してこない役職者や、ローラーが終わって真実が確定した人物を「絶対に疑ってはいけない味方（確定白）」として認識し、その人物の意見に従うセオリー。
システムの発動条件：
状態：探偵CO = 1人（対抗なし） または ボディガードがGJ（防衛）を成功させた人物
AIへの指示（フラグ）："Confirmed_White": "Player_C"
AIの発言例（ヘイト回避型）：「Cは唯一の探偵だから絶対に平民陣営だよね。僕はCの指示に従って投票するよ。」
③ ライン考察（矛盾の追求）
定義：占い結果や投票行動から、「誰と誰が仲間か（ラインが繋がっているか）」を推測する。
システムの発動条件：
状態：探偵Aが「Bは富豪だ」と告発したのに、Bが「自分は平民だ」と主張している。
AIへの指示（フラグ）："Conflict_Line": ["A", "B"]
AIの発言例（論理型）：「AはBを富豪だと言っている。つまり、AとBのどちらかが確実に嘘をついている。AとBのどちらかを吊るべきだ。」
④ 大富豪のプレイング（事実）と役職のすり合わせ
本作ならではのオリジナルロジックです。
定義：大富豪パートでの「カードの強さ」や「イカサマの有無」と、会議での主張に矛盾がないかを突く。
システムの発動条件：
状態：Cが「自分はただの平民だ」と主張しているが、昨夜大富豪で「ジョーカー」と「2」を複数回出した（富豪フラグON）。
AIへの指示（フラグ）："Action_Contradiction": {"Target": "C", "Reason": "Played too strong cards for a commoner"}
AIの発言例（論理型）：「C、お前は平民だと言っているが、昨日の夜ジョーカーを出したな？ 平民の初期手札にそんな強いカードがある確率はおかしい。お前が富豪じゃないのか？」
3. 性格（Personality）とロジックの化学反応
システムが「ローラーが有効である」と判断して全員のAIにフラグを渡しても、AIの「性格」によってロジックへの対応が分岐します。これがゲームのドラマを生み出します。
**論理型（Logical）**の対応：
システムが提示したロジック（ローラー等）を積極的に全体に提案し、ロジック通りに投票する。
「セオリー通り、対抗している探偵をローラーしよう。」
**感情型（Emotional）**の対応：
ロジックを理解しつつも、自分の好感度（Affinity）を優先してロジックを破壊しようとする。
「ローラーなんて残酷だ！ 私はAが好きだし信じている！ 偽物は絶対にBだ！ 真を決め打ってBだけを吊ろう！」（※この非合理的な発言が、プレイヤーに『こいつは感情で動いているのか？ それともBを陥れたい狂人なのか？』という疑心暗鬼を生む）
**ヘイト回避型（Passive）**の対応：
自分からロジックは提案しないが、論理型が提案したロジックに「それが一番安全だね」と便乗する。
**破滅型（Chaotic）**の対応：
あえてロジックの穴を突く、または無視して全く関係ない人物（グレー）を吊るよう扇動する。